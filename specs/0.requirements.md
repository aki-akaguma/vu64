# Requirements for vu64 library

## Core Functionality

*   The library provides a variable-length integer encoding scheme for `u64` and `i64` values, referred to as `vu64` and `vi64`.
*   The encoding is designed for compactness, using 1 to 9 bytes depending on the integer's magnitude.
*   It supports encoding and decoding of these variable-length integers.
*   It also provides `std::io` integration for reading and writing these encoded values from and to streams.
*   Signed integers (`i64`) are handled using zigzag encoding.

## Modules

*   `lib.rs`: The main library file, defining the core `vu64` format, encoding/decoding functions (`encode`, `decode`), and the `Vu64` struct.
*   `io.rs`: Contains traits (`ReadVu64`, `WriteVu64`) that extend `std::io::Read` and `std::io::Write` to handle `vu64` and `vi64` values directly from I/O streams. This is gated by the `io` feature.
*   `signed.rs`: Implements the zigzag encoding for signed integers (`i64`) and provides `encode` and `decode` functions for `vi64`.

## Features

*   `io`: This feature enables the `std::io` integration.
*   `vu64_debug`: This feature seems to enable some debugging assertions or alternative code paths for debugging purposes, but it's not a public-facing feature for users.

## Dependencies

*   The library appears to have no external dependencies. It only uses `std::core` and `std::io`.

## Requirements

1.  **Variable-Length Encoding/Decoding:** The primary requirement is to provide functions to encode and decode `u64` and `i64` integers into a compact, variable-length byte representation.
2.  **I/O Integration:** The library should offer a way to read and write these encoded integers from any source/destination that implements the `std::io::Read` and `std::io::Write` traits. This functionality should be optional and controlled by a feature flag (`io`).
3.  **Signed Integer Support:** The library must support signed 64-bit integers (`i64`) by using zigzag encoding to map them to unsigned 64-bit integers (`u64`) before applying the variable-length encoding.
4.  **No External Dependencies:** The library should be self-contained and not rely on any third-party crates from `crates.io`.
5.  **Error Handling:** The decoding functions must return a `Result` type to handle potential errors like truncated input or malformed data.
6.  **Performance:** The implementation should be efficient, using techniques like lookup tables and inline functions to minimize overhead.
